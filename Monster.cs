using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleProject_2
{
    enum EnemyType
    { normal, boss }
    internal class Monster
    {
        //플레이어랑 코드 같은 것은 나중에 부모 클래스를 만들어서 상속시킬 예정
        string name;
        public string Name
        {
            get { return name; }
            set { name = value; }
        }

        public MyPos pos;

        static string[] playerImage;
        static string[] eraserplayerImage;

        public Status status;
        EnemyType enemyType;

        public int exp;
        public Monster()
        {
            playerImage = new string[2];
            playerImage[0] = "   @ @  ";
            playerImage[1] = "( *△* )";//<-이거 특수문자 때문에 크기 8 먹는다 [2]*8 배열인듯
            eraserplayerImage = new string[2];
            eraserplayerImage[0] = "        ";
            eraserplayerImage[1] = "        ";
            Name = "슬라임";
            status.attack = 3;
            status.hp = 10;
            status.defence = 0;
            pos.x = 150;
            pos.y = 57;
            exp = 3;
            enemyType = EnemyType.normal;
            SetMonsterPos(playerImage);
        }
        public Monster(int x, int y)
        {
            playerImage = new string[2];
            playerImage[0] = "   @ @  ";
            playerImage[1] = "( *△* )";//<-이거 특수문자 때문에 크기 8 먹는다 [2]*8 배열인듯
            eraserplayerImage = new string[2];
            eraserplayerImage[0] = "        ";
            eraserplayerImage[1] = "        ";
            Name = "일반몹";
            status.attack = 3;
            status.hp = 10;
            status.defence = 0;
            pos.x = x;
            pos.y = y;
            exp = 3;
            enemyType = EnemyType.normal;
            SetMonsterPos(playerImage);
        }
        public Monster(string name, int x, int y, EnemyType type)
        {
            Name = name;
            pos.x = x;
            pos.y = y;
            enemyType = type;
            SetMonsterPos(playerImage);
        }

        public void BossMonster(int x, int y)
        {
            playerImage = new string[30];
            //보스(1페)
            //한 줄에 79글자
            playerImage[0] = "                    #+#         **###%####                       ##**#         ";
            playerImage[1] = "                 ####%+#      %*=--------=+#%                 ##===+=-=*%      ";
            playerImage[2] = "              ##* #====+%*++**-------------==##**##%#        %+-=++==++++##    ";
            playerImage[3] = "               ##++=++++*+--------------------------=+##    %=++*+=+++*===#    ";
            playerImage[4] = "                 **===+#+----------------------------==+%   #--*++==++*+--*#   ";
            playerImage[5] = "                  %**+=-------------------------------===%  #++**==+-=#++=##   ";
            playerImage[6] = "                 %-------------------------------------===# #+--=##**#+=+*#    ";
            playerImage[7] = "                ##-------------------------------------===%* *#++++==++=##     ";
            playerImage[8] = "               #%*-------------------------------------=====*%*##*++*#%#       ";
            playerImage[9] = "      *%#+*# ##=-------=##*--------------*##=-------==----====#=+#**#*         ";
            playerImage[10] = "   ##==+**=#%*--------+*-*%#-----------=#-=%%=--------=-----=*+++###==-=#%     ";
            playerImage[11] = " #*=*===*=*+*---------+%####-----------=%####+--------------=*=*%#*=*#=+*+=%*  ";
            playerImage[12] = "#=+=---*=-=%-------====****=--*=+%=++---=****===-----------=%##%*#*+==#--==++# ";
            playerImage[13] = "** *#*-==-+*------===++==------------------=+=====-------=%=-----=%=--==-=#%#*%";
            playerImage[14] = "      #%#*%*-------=====-------------------======--------%---------###*+%      ";
            playerImage[15] = "         %+#=---------------------------------------==--=#---------=%          ";
            playerImage[16] = "        %==#+---=-----------------------------------=---=%--------==%          ";
            playerImage[17] = "       +*--=#==-=--------------------------------==-----=#*=----===*#          ";
            playerImage[18] = "       #+--=+#---=-------------------------------------=#=*%+=====*%           ";
            playerImage[19] = "       **--=+*-----------------------------------------#+=#+====#%             ";
            playerImage[20] = "        #*++##=---------------------------------------+*++*=====*#             ";
            playerImage[21] = "             %=-------------=------------------------=#-+%=====*%              ";
            playerImage[22] = "             *#==-------------=====------------------#+=*===+###               ";
            playerImage[23] = "               %+====-------------------------------+++**==*#                  ";
            playerImage[24] = "                 %#*=======-------------============*-+#==*#                   ";
            playerImage[25] = "                   #+=+++**====-----====================+%                     ";
            playerImage[26] = "                    #---==+#*==============*%#*++++*#%#%                       ";
            playerImage[27] = "                    %*----===+##+++==+++#%#%==========*#                       ";
            playerImage[28] = "                     ##=--===+%            #%-----===##                        ";
            playerImage[29] = "                       #%%%%#                #%+=++#%                          ";
            string eraser = "                                                                                 ";
            eraserplayerImage = new string[30];
            for (int i = 0; i < eraserplayerImage.Length; i++)
            {
                eraserplayerImage[i] = eraser;
            }
            Name = "보스";
            status.attack = 10;
            status.hp = 100;
            status.defence = 10;
            pos.x = x;
            pos.y = y;
            exp = 100;
            enemyType = EnemyType.boss;
            SetBossMonsterPos(playerImage);

            ////보스(1페)
            //Console.WriteLine(
            //    "                    #+#         **###%####                       ##**#         \r\n" +
            //    "                 ####%+#      %*=--------=+#%                 ##===+=-=*%      \r\n" +
            //    "              ##* #====+%*++**-------------==##**##%#        %+-=++==++++##    \r\n" +
            //    "               ##++=++++*+--------------------------=+##    %=++*+=+++*===#    \r\n" +
            //    "                 **===+#+----------------------------==+%   #--*++==++*+--*#   \r\n" +
            //    "                  %**+=-------------------------------===%  #++**==+-=#++=##   \r\n" +
            //    "                 %-------------------------------------===# #+--=##**#+=+*#    \r\n" +
            //    "                ##-------------------------------------===%* *#++++==++=##     \r\n" +
            //    "               #%*-------------------------------------=====*%*##*++*#%#       \r\n" +
            //    "      *%#+*# ##=-------=##*--------------*##=-------==----====#=+#**#*         \r\n" +
            //    "   ##==+**=#%*--------+*-*%#-----------=#-=%%=--------=-----=*+++###==-=#%     \r\n" +
            //    " #*=*===*=*+*---------+%####-----------=%####+--------------=*=*%#*=*#=+*+=%*  \r\n" +
            //    "#=+=---*=-=%-------====****=--*=+%=++---=****===-----------=%##%*#*+==#--==++# \r\n" +
            //    "** *#*-==-+*------===++==------------------=+=====-------=%=-----=%=--==-=#%#*%\r\n" +
            //    "      #%#*%*-------=====-------------------======--------%---------###*+%      \r\n" +
            //    "         %+#=---------------------------------------==--=#---------=%          \r\n" +
            //    "        %==#+---=-----------------------------------=---=%--------==%          \r\n" +
            //    "       +*--=#==-=--------------------------------==-----=#*=----===*#          \r\n" +
            //    "       #+--=+#---=-------------------------------------=#=*%+=====*%           \r\n" +
            //    "       **--=+*-----------------------------------------#+=#+====#%             \r\n" +
            //    "        #*++##=---------------------------------------+*++*=====*#             \r\n" +
            //    "             %=-------------=------------------------=#-+%=====*%              \r\n" +
            //    "             *#==-------------=====------------------#+=*===+###               \r\n" +
            //    "               %+====-------------------------------+++**==*#                  \r\n" +
            //    "                 %#*=======-------------============*-+#==*#                   \r\n" +
            //    "                   #+=+++**====-----====================+%                     \r\n" +
            //    "                    #---==+#*==============*%#*++++*#%#%                       \r\n" +
            //    "                    %*----===+##+++==+++#%#%==========*#                       \r\n" +
            //    "                     ##=--===+%            #%-----===##                        \r\n" +
            //    "                       #%%%%#                #%+=++#%                          ");
            ////보스 2페
            //Console.WriteLine(
            //    "                    +#+         **======+=                       *=++=         \r\n" +
            //    "                 =+=+-%=      -*@@@@@@@@@@%=-                 ++@@%%@@@*-      \r\n" +
            //    "              ++* =%@@%%=*##**@@@@@@@@@@@@@@@=+**+=-=        -%@@##@@%###==    \r\n" +
            //    "               =+%#@##%%##@@@@@@@@@@@@@@@@@@@@@@@@@@@%=+    -@%%+#@%%#+@@@=    \r\n" +
            //    "                 **@@@%+%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%-   +@@*#%@@%%#%@@*=   \r\n" +
            //    "                  -**#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-  =##**@%%@%=#%@++   \r\n" +
            //    "                 -@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@= =#@@@=+#*=%@#*+    \r\n" +
            //    "                ==@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-* *=##%%@@##@+=     \r\n" +
            //    "               ==#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@*-*==*##*+-=       \r\n" +
            //    "      +-+%*= +=@@@@@@@@@==*@@@@@@@@@@@@@@*==@@@@@@@@@@@@@@@@@@=@#+**=*         \r\n" +
            //    "   =+@@#**@=-#@@@@@@@@%*@*-=@@@@@@@@@@@@=@@--@@@@@@@@@@@@@@@@+#%#===@@@@+=     \r\n" +
            //    " =*@*%@@+%*#*@@@@@@@@@#-=+==@@@@@@@@@@@@-==+=#@@@@@@@@@@@@@@@*%*-=+@*+%%*%@=+  \r\n" +
            //    "=@%@@@@+@@@=@@@@@@@@@@@****@@@*@#-@%#@@@%+***@@@@@@@@@@@@@@@-==-*=*%@@+@@@@#%= \r\n" +
            //    "*# +=+@%@@#*@@@@@@@@@%%@@@@@@@@@@@@@@@@@@@@@%@@%@@@@@@@@@@-@@@@@@@=@@@%@@@+-=#-\r\n" +
            //    "      =-=*-*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@@@@@@@@@+++*%=      \r\n" +
            //    "         -%=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=@@@@@@@@@%-          \r\n" +
            //    "        -@@=#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@-@@@@@@@@@%-          \r\n" +
            //    "       %*@@@=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=*@@@@@@@@*=          \r\n" +
            //    "       =%@@@%=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=@*=%@@@@@*-           \r\n" +
            //    "       #*@@@#*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+%@+%@@@%+-             \r\n" +
            //    "        =*%%++@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#*%#*@@@@@*=             \r\n" +
            //    "             -@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@#-@@@@@*=              \r\n" +
            //    "             *=@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=%@*%@@%+=+               \r\n" +
            //    "               -#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#%#*+@@*=                  \r\n" +
            //    "                 -=*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@+@%=@@+=                   \r\n" +
            //    "                   +%@%%%+#@@@@@@@@@@@@@@@@@@@@@@@@@@@@@#-                     \r\n" +
            //    "                    =@@@@@%=*@@@@@@@@@@@@@@+-=+#%%##+==-                       \r\n" +
            //    "                    =#@@@@@@@#==#%%%%%%#+-+-@@@@@@@@@@*=                       \r\n" +
            //    "                     +=@@@@@@#-            +-@@@@@@@@++                        \r\n" +
            //    "                       +=---=                ==%@%#+-                          ");


        }
        public void SetBossMonsterPos(string[] s)
        {
            Map.SetMonsterMap(pos.x, pos.y);
            for (int i = 0; i < s.Length; i++)
            {
                Console.SetCursorPosition(pos.x, pos.y + i);
                Console.Write(s[i]);
            }
            //Console.SetCursorPosition(pos.x, pos.y);
            //Console.Write(s[0]);
            //Console.SetCursorPosition(pos.x, pos.y + 1);
            //Console.Write(s[1]);
        }
        public void SetMonsterPos(string[] s)
        {
            Map.SetMonsterMap(pos.x, pos.y);
            Console.SetCursorPosition(pos.x, pos.y);
            Console.Write(s[0]);
            Console.SetCursorPosition(pos.x, pos.y + 1);
            Console.Write(s[1]);
        }

        public void Move(Direction dir)
        {
            Map.SetMonsterMap(pos.x, pos.y);
            Console.SetCursorPosition(pos.x, pos.y);
            for (int i = 0; i < 8; i++)
            {
                Console.Write(Map.adventureMap[pos.x + i, pos.y]);
            }
            Console.SetCursorPosition(pos.x, pos.y + 1);
            for (int i = 0; i < 8; i++)
            {
                Console.Write(Map.adventureMap[pos.x + i, pos.y + 1]);
            }

            switch (dir)
            {
                case Direction.left:
                    pos.x--;
                    break;
                case Direction.right:
                    pos.x++;
                    break;
                case Direction.up:
                    pos.y--;
                    break;
                case Direction.down:
                    pos.y++;
                    break;
            }


            SetMonsterPos(playerImage);
        }
        public void MoveLeft()
        {
            //특수문자라 -2다 일반이면 -1로 바꿔야 한다
            if (!Map.BaseMap[pos.x - 2, pos.y])
            {
                Move(Direction.left);
            }
        }
        public void MoveRight()
        {
            if (!Map.BaseMap[pos.x + playerImage[1].Length + 1, pos.y])
            {
                Move(Direction.right);
            }
        }

        public void Die()
        {
            Map.SetMonsterMap(pos.x, pos.y);
            Console.SetCursorPosition(pos.x, pos.y);
            for (int i = 0; i < 8; i++)
            {
                Console.Write(Map.adventureMap[pos.x + i, pos.y]);
            }
            Console.SetCursorPosition(pos.x, pos.y + 1);
            for (int i = 0; i < 8; i++)
            {
                Console.Write(Map.adventureMap[pos.x + i, pos.y + 1]);
            }
        }
    }
}
